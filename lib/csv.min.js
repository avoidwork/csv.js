/**
 * csv.js
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @copyright 2013 Jason Mulligan
 * @license BSD-3 <https://raw.github.com/avoidwork/csv.js/master/LICENSE>
 * @link http://csvjs.com
 * @module csv.js
 * @version 0.1.1
 */
(function(n){"use strict";function t(n){try{return JSON.parse(n)}catch(t){return void 0}}var e=/msie|ie/i,r=/\n$/,o=/\[object Object\]/,i=/^\s|\"|\n|,|\s$/,c=n.navigator,u=c?e.test(c.userAgent):!1,f=u?parseInt(c.userAgent.replace(/(.*msie|;.*)/gi,""),10):null,a=function(){return!u||f>8?function(n,t){t=t===!0;var e=[];return isNaN(n.length)?t?e=p(n):s(n,function(n){e.push(n)}):e=Array.prototype.slice.call(n),e}:function(n,t){t=t===!0;var e=[];if(isNaN(n.length))t?e=p(n):s(n,function(n){e.push(n)});else try{e=Array.prototype.slice.call(n)}catch(r){s(n,function(n,t){"length"!==t&&e.push(n)})}return e}}(),csv=function(n,e,o){e=e||",",o=o!==!1;var i=t(n)||n,c="";return i instanceof Array?i[0]instanceof Object?(o&&(c=p(i[0]).join(e)+"\n"),c+=i.map(function(n){return csv(n,e,!1)}).join("\n")):c+=a(i).map(function(n){return l(n,e)}).join(e)+"\n":(o&&(c=p(i).join(e)+"\n"),c+=a(i).map(function(n){return l(n,e)}).join(e)+"\n"),c.replace(r,"")},s=function(){return"function"==typeof Object.keys?function(n,t){if("function"!=typeof t)throw Error("Invalid arguments");return Object.keys(n).forEach(function(e){return t.call(n,n[e],e)}),n}:function(n,t){var e,r,o=Object.prototype.hasOwnProperty;if("function"!=typeof t)throw Error("Invalid arguments");for(e in n){if(!o.call(n,e))break;if(r=t.call(n,n[e],e),r===!1)break}return n}}(),p=function(){return"function"==typeof Object.keys?function(n){return Object.keys(n)}:function(n){var t=[];return s(n,function(n,e){t.push(e)}),t}}(),l=function(n,t){var e;return n instanceof Array?(e='"'+(""+n)+'"',o.test(e)&&(e='"'+csv(n,t)+'"')):e=n instanceof Object?'"'+csv(n,t)+'"':i.test(n)?'"'+n.replace(/"/g,'""')+'"':n,e};csv.version="0.1.1","undefined"!=typeof exports?module.exports=csv:"function"==typeof define?define(function(){return csv}):n.csv=csv})(this);