{"version":3,"sources":["csv.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","global","coerce","value","result","tmp","undefined","isNaN","Number","parse","decode","arg","delimiter","arguments","length","regex","RegExp","rows","trim","split","keys","shift","nth","x","i","n","row","replace","push","encode","header","Array","isArray","Object","join","map","prepare","cast","REGEX_NL","JSON","e","input","output","toString","REGEX_OBJTYPE","test","REGEX_QUOTE","REGEX_IE","navigator","ie","userAgent","version","parseInt","key","slice","call","o","iterate","idx","fn","has","hasOwnProperty","Error","forEach","v","k","module","exports","define","amd","csv","window"],"mappings":"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","file":"csv.min.js","sourcesContent":["\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/**\n * Simplify encoding & decoding CSV\n *\n * @author Jason Mulligan <jason.mulligan@avoidwork.com>\n * @copyright 2017\n * @license BSD-3-Clause\n * @version 1.0.4\n */\n(function (global) {\n\t\"use strict\";\n\n\tvar REGEX_IE = /msie|ie/i,\n\t    REGEX_NL = /(\\n|\\r)$/,\n\t    REGEX_OBJTYPE = /\\[object Object\\]/,\n\t    REGEX_QUOTE = /^\\s|\\\"|\\n|,|\\s$/,\n\t    navigator = global.navigator,\n\t    ie = navigator ? REGEX_IE.test(navigator.userAgent) : false,\n\t    version = ie ? parseInt(navigator.userAgent.replace(/(.*msie|;.*)/gi, \"\"), 10) : null;\n\n\t/**\n  * Returns an Object ( NodeList, etc. ) as an Array\n  *\n  * @method cast\n  * @param  {Object}  obj Object to cast\n  * @param  {Boolean} key [Optional] Returns key or value, only applies to Objects without a length property\n  * @return {Array}       Object as an Array\n  */\n\tvar cast = function () {\n\t\tif (!ie || version > 8) {\n\t\t\treturn function (obj) {\n\t\t\t\tvar key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n\t\t\t\treturn !isNaN(obj.length) ? Array.prototype.slice.call(obj) : key ? keys(obj) : keys(obj).map(function (i) {\n\t\t\t\t\treturn obj[i];\n\t\t\t\t});\n\t\t\t};\n\t\t} else {\n\t\t\treturn function (obj) {\n\t\t\t\tvar key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n\t\t\t\tvar o = [];\n\n\t\t\t\tif (!isNaN(obj.length)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\to = Array.prototype.slice.call(obj);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\titerate(obj, function (i, idx) {\n\t\t\t\t\t\t\tif (idx !== \"length\") {\n\t\t\t\t\t\t\t\to.push(i);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tkey ? o = keys(obj) : iterate(obj, function (i) {\n\t\t\t\t\t\treturn o.push(i);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn o;\n\t\t\t};\n\t\t}\n\t}();\n\n\t/**\n  * Coerces a String to a Type\n  *\n  * @method coerce\n  * @memberOf utility\n  * @param  {String} value String to coerce\n  * @return {Mixed}        Primitive version of the String\n  */\n\tfunction coerce(value) {\n\t\tvar result = void 0,\n\t\t    tmp = void 0;\n\n\t\tif (value === null || value === undefined) {\n\t\t\tresult = undefined;\n\t\t} else if (value === \"true\") {\n\t\t\tresult = true;\n\t\t} else if (value === \"false\") {\n\t\t\tresult = false;\n\t\t} else if (value === \"null\") {\n\t\t\tresult = null;\n\t\t} else if (value === \"undefined\") {\n\t\t\tresult = undefined;\n\t\t} else if (value === \"\") {\n\t\t\tresult = value;\n\t\t} else if (!isNaN(tmp = Number(value))) {\n\t\t\tresult = tmp;\n\t\t} else {\n\t\t\tresult = parse(value) || value;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n  * Converts CSV to an Array of Objects\n  *\n  * @method decode\n  * @param  {String} arg       CSV string\n  * @param  {String} delimiter [Optional] Delimiter to split columns on, default is \",\"\n  * @return {Array}            Array of Objects\n  */\n\tfunction decode(arg) {\n\t\tvar delimiter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \",\";\n\n\t\tvar regex = new RegExp(delimiter + \"(?=(?:[^\\\"]|\\\"(?:[^\\\"])[^\\\"]*\\\")*$)\"),\n\t\t    rows = trim(arg).split(\"\\n\"),\n\t\t    keys = rows.shift().split(delimiter),\n\t\t    result = [],\n\t\t    nth = rows.length,\n\t\t    x = keys.length;\n\n\t\tvar i = -1,\n\t\t    n = void 0,\n\t\t    obj = void 0,\n\t\t    row = void 0;\n\n\t\twhile (++i < nth) {\n\t\t\tobj = {};\n\t\t\trow = rows[i].split(regex);\n\n\t\t\tn = -1;\n\t\t\twhile (++n < x) {\n\t\t\t\tobj[keys[n]] = coerce((row[n] || \"\").replace(/^\"|\"$/g, \"\"));\n\t\t\t}\n\n\t\t\tresult.push(obj);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n  * Encodes `arg` as CSV\n  *\n  * @method encode\n  * @param  {String}  arg       Array, Object or JSON String to transform\n  * @param  {String}  delimiter [Optional] Character to separate fields\n  * @param  {Boolean} header    [Optional] False to not include field names as first row\n  * @return {String}            CSV string\n  */\n\tfunction encode(arg) {\n\t\tvar delimiter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \",\";\n\t\tvar header = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n\t\tvar obj = parse(arg) || arg;\n\t\tvar result = \"\";\n\n\t\tif (Array.isArray(obj)) {\n\t\t\tif (obj[0] instanceof Object) {\n\t\t\t\tif (header) {\n\t\t\t\t\tresult = keys(obj[0]).join(delimiter) + \"\\n\";\n\t\t\t\t}\n\n\t\t\t\tresult += obj.map(function (i) {\n\t\t\t\t\treturn encode(i, delimiter, false);\n\t\t\t\t}).join(\"\\n\");\n\t\t\t} else {\n\t\t\t\tresult += prepare(obj, delimiter) + \"\\n\";\n\t\t\t}\n\t\t} else {\n\t\t\tif (header) {\n\t\t\t\tresult = keys(obj).join(delimiter) + \"\\n\";\n\t\t\t}\n\n\t\t\tresult += cast(obj).map(function (i) {\n\t\t\t\treturn prepare(i, delimiter);\n\t\t\t}).join(delimiter) + \"\\n\";\n\t\t}\n\n\t\treturn result.replace(REGEX_NL, \"\");\n\t}\n\n\t/**\n  * Iterates an Object and executes a function against the properties,\n  * & can be halted by returning `false` from `fn`\n  *\n  * @method iterate\n  * @param  {Object}   obj Object to iterate\n  * @param  {Function} fn  Function to execute against properties\n  * @return {Object}       Object\n  */\n\tvar iterate = function () {\n\t\tvar keys = Object.keys || function (obj, fn) {\n\t\t\tvar has = Object.prototype.hasOwnProperty;\n\t\t\tvar i = void 0,\n\t\t\t    result = void 0;\n\n\t\t\tif (typeof fn !== \"function\") {\n\t\t\t\tthrow new Error(\"Invalid arguments\");\n\t\t\t}\n\n\t\t\tfor (i in obj) {\n\t\t\t\tif (has.call(obj, i)) {\n\t\t\t\t\tresult = fn.call(obj, obj[i], i);\n\n\t\t\t\t\tif (result === false) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn obj;\n\t\t};\n\n\t\treturn function (obj, fn) {\n\t\t\tif (typeof fn !== \"function\") {\n\t\t\t\tthrow new Error(\"Invalid arguments\");\n\t\t\t}\n\n\t\t\tkeys(obj).forEach(function (i) {\n\t\t\t\treturn fn.call(obj, obj[i], i);\n\t\t\t});\n\n\t\t\treturn obj;\n\t\t};\n\t}();\n\n\t/**\n  * Returns the keys in an \"Associative Array\"\n  *\n  * @method keys\n  * @param  {Mixed} obj Array or Object to extract keys from\n  * @return {Array}     Array of the keys\n  */\n\tvar keys = function () {\n\t\tif (typeof Object.keys == \"function\") {\n\t\t\treturn function (obj) {\n\t\t\t\treturn Object.keys(obj);\n\t\t\t};\n\t\t} else {\n\t\t\treturn function (obj) {\n\t\t\t\tvar keys = [];\n\n\t\t\t\titerate(obj, function (v, k) {\n\t\t\t\t\treturn keys.push(k);\n\t\t\t\t});\n\n\t\t\t\treturn keys;\n\t\t\t};\n\t\t}\n\t}();\n\n\t/**\n  * Parses the argument\n  *\n  * @method parse\n  * @param  {String} arg String to parse\n  * @return {Mixed}      Resulting from parsing JSON, or undefined\n  */\n\tfunction parse(arg) {\n\t\ttry {\n\t\t\treturn JSON.parse(arg);\n\t\t} catch (e) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\t/**\n  * Prepares input based on CSV rules\n  *\n  * @method param\n  * @param  {Mixed}  input     Array, Object or String\n  * @param  {String} delimiter [Optional] Character to separate fields\n  * @return {String}           CSV formatted String\n  */\n\tfunction prepare(input, delimiter) {\n\t\tvar output = void 0;\n\n\t\tif (input instanceof Array) {\n\t\t\toutput = \"\\\"\" + input.toString() + \"\\\"\";\n\n\t\t\tif (REGEX_OBJTYPE.test(output)) {\n\t\t\t\toutput = \"\\\"\" + encode(input, delimiter) + \"\\\"\";\n\t\t\t}\n\t\t} else if (input instanceof Object) {\n\t\t\toutput = \"\\\"\" + encode(input, delimiter) + \"\\\"\";\n\t\t} else if (REGEX_QUOTE.test(input)) {\n\t\t\toutput = \"\\\"\" + input.replace(/\"/g, \"\\\"\\\"\") + \"\\\"\";\n\t\t} else {\n\t\t\toutput = input;\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tfunction trim(arg) {\n\t\treturn arg.replace(/^(\\s+|\\t+)|(\\s+|\\t+|\\n+)$/g, \"\");\n\t}\n\n\tvar output = {\n\t\tdecode: decode,\n\t\tencode: encode,\n\t\tversion: \"1.0.4\"\n\t};\n\n\t// CommonJS, AMD, script tag\n\tif (typeof module !== \"undefined\") {\n\t\tmodule.exports = output;\n\t} else if (typeof define === \"function\" && _typeof(define.amd) !== void 0) {\n\t\tdefine(function () {\n\t\t\treturn output;\n\t\t});\n\t} else {\n\t\tglobal.csv = output;\n\t}\n})(typeof window !== \"undefined\" ? window : global);\n"]}